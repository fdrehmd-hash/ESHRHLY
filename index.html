<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eshrahly | Ù…Ù†ØµØ© Ø§Ø´Ø±Ø­Ù„ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

<script>
async function recognizeImage(imageFile) {
    try {
        // Ù†Ø­Ø¯Ø¯ Ù‡Ù†Ø§ Ù…Ø³Ø§Ø± Ø§Ù„Ù„ØºØ§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø­Ø¯ÙˆØ« 404
        const worker = await Tesseract.createWorker({
            langPath: 'https://tessdata.projectnaptha.com/4.0.0_best/', 
            logger: m => console.log(m) // Ø³ÙŠØ¸Ù‡Ø± Ù„Ùƒ Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„
        });

        await worker.loadLanguage('ara+eng');
        await worker.initialize('ara+eng');
        const { data: { text } } = await worker.recognize(imageFile);
        await worker.terminate();
        return text;
    } catch (error) {
        console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„:", error);
        return ""; // Ù†Ø±Ø¬Ø¹ Ù†Øµ ÙØ§Ø±Øº Ù„ÙƒÙŠ Ù„Ø§ ÙŠØ¹Ù„Ù‚ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    }
}
</script>
    <style>
        /* Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† */
        :root { --primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%); --glass-bg: rgba(255, 255, 255, 0.1); --glass-border: rgba(255, 255, 255, 0.2); --accent-color: #764ba2; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: var(--primary-bg); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; color: #fff; overflow-x: hidden; }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© */
        .glass-card { background: var(--glass-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid var(--glass-border); border-radius: 25px; padding: 40px; width: 100%; max-width: 900px; box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .hero-section { text-align: center; margin-bottom: 35px; }
        .hero-section h1 { font-size: 2.8rem; font-weight: 900; margin-bottom: 10px; background: linear-gradient(to right, #fff, #e0e0e0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        #startBtn { width: 100%; padding: 20px; background: #ffffff; color: var(--accent-color); border: none; border-radius: 15px; font-size: 1.6rem; font-weight: 900; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); margin-top: 10px; }
        #startBtn:hover { transform: scale(1.02); background: #f8f8f8; }
        
        #returnBtn { width: 100%; max-width: 300px; padding: 20px; background: #ffffff; color: var(--accent-color); border: none; border-radius: 15px; font-size: 1.6rem; font-weight: 900; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); margin: 20px auto 0; display: block; }
        #returnBtn:hover { transform: scale(1.02); background: #f8f8f8; }
        
        .grid-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .option-card { background: rgba(255, 255, 255, 0.07); padding: 30px 15px; border-radius: 20px; text-align: center; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 2px solid transparent; cursor: pointer; }
        .option-card:hover { transform: translateY(-10px); background: rgba(255, 255, 255, 0.12); }
        .option-card.active { border: 3px solid #ffffff !important; box-shadow: 0 0 20px rgba(255, 255, 255, 0.4); transform: scale(1.05); }

        .option-card i { font-size: 3rem; display: block; margin-bottom: 15px; font-style: normal; }
        .option-card h3 { font-size: 1.8rem; margin-bottom: 8px; font-weight: 900; }
        .option-card p { font-size: 0.9rem; opacity: 0.8; line-height: 1.4; }
        
        .stat-card { cursor: default !important; border: 1px solid var(--glass-border) !important; }
        .stat-card:hover { transform: none !important; }

        .form-container { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; color: #333; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 700; color: #444; }
        input { width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 12px; font-size: 1rem; outline: none; }
        input:focus { border-color: #667eea; }
        .btn-action { width: 100%; padding: 18px; background: var(--accent-color); color: white; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 700; cursor: pointer; transition: 0.3s; }
        
        .page-step { display: none; }
        #welcomePage { display: block; }
        
        .loader { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; }
        .spinner { width: 60px; height: 60px; border: 6px solid #fff; border-top: 6px solid var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .payment-details { background: #f0f0f0; padding: 15px; border-radius: 10px; margin-top: 10px; display: none; border-right: 4px solid var(--accent-color); }

        /* --- Ù‚Ø³Ù… Ø§Ù„Ø¢Ø±Ø§Ø¡ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© --- */
        .testimonials-section { margin-top: 40px; border-top: 1px solid var(--glass-border); padding-top: 30px; overflow: hidden; position: relative; width: 100%; }
        .testimonials-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 20px; text-align: center; color: #eee; }
        
        .testimonials-grid { 
            display: flex; 
            flex-wrap: nowrap;
            width: max-content; 
            gap: 20px; 
            animation: scrollRTL 25s linear infinite; 
        }

        .testimonials-grid:hover { animation-play-state: paused; }

        .testimonial-card { 
            background: rgba(255, 255, 255, 0.05); 
            padding: 20px; 
            border-radius: 18px; 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            width: 320px; 
            flex-shrink: 0; 
        }

        .student-meta { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .avatar { width: 45px; height: 45px; background: #fff; color: var(--accent-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 1.2rem; }
        .stars { color: #ffcc00; font-size: 0.9rem; margin-bottom: 5px; display: block; }
        .comment-text { font-size: 0.95rem; line-height: 1.6; opacity: 0.9; font-style: italic; white-space: normal; }

        @keyframes scrollRTL {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); } 
        }

        @media (max-width: 600px) {
            .hero-section h1 { font-size: 1.8rem; } 
            .glass-card { padding: 25px 15px; } 
            .grid-options { grid-template-columns: 1fr 1fr; gap: 10px; } 
            .testimonial-card { width: 280px; } 
        }
    </style>
</head>
<body>

<div id="loadingOverlay" class="loader">
    <div class="spinner"></div>
    <p>Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨... â³</p>
</div>

<div id="welcomePage" class="glass-card page-step">
    <div class="hero-section">
        <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ø´Ø±Ø­Ù„ÙŠ ğŸ‘‹</h1>
        <p>Ù†Ø­ÙˆÙ„ ØºÙ…ÙˆØ¶ Ø§Ù„Ù€ PDF Ø¥Ù„Ù‰ Ù…ØªØ¹Ø© ÙÙŠ Ø§Ù„ÙÙ‡Ù… âœ¨</p>
    </div>

    <div class="grid-options">
        <div class="option-card stat-card">
            <i>ğŸ“</i>
            <h3 class="counter" data-target="500">0</h3>
            <p>Ø·Ø§Ù„Ø¨ Ù…Ø´ØªØ±Ùƒ</p>
        </div>
        <div class="option-card stat-card">
            <i>â­</i>
            <h3 class="counter-float" data-target="4.9">0</h3>
            <p>ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø©</p>
        </div>
    </div>

    <div class="testimonials-section">
        <h2 class="testimonials-title">Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† ğŸ’¬</h2>
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ø³</div><div><strong>Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠ ÙˆÙØ± Ø¹Ù„ÙŠÙ‘ Ø³Ø§Ø¹Ø§Øª Ù…Ù† Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŒ Ø§Ù„Ø´Ø±Ø­ ÙƒØ§Ù† Ø¬Ø¯Ø§Ù‹ Ù…Ø¨Ø³Ø· ÙˆÙ…ÙÙ‡ÙˆÙ…."</p>
            </div>
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ø£</div><div><strong>Ø£Ø­Ù…Ø¯ Ø§Ù„Ø®Ø§Ù„Ø¯ÙŠ</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø®Ø¯Ù…Ø© Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ Ø£ÙÙ‡Ù… Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙÙƒÙŠØ± ÙÙŠ Ø§Ù„Ø­Ù„ Ù…Ø´ Ø¨Ø³ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…!"</p>
            </div>
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ù…</div><div><strong>Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø§Ù„Ø®Ø¯Ù…Ø© Ø±Ø§Ø¦Ø¹Ø© ÙˆØ³Ø±ÙŠØ¹Ø©ØŒ Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ ÙƒØ«ÙŠØ±Ø§Ù‹ ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©. Ø£ÙˆØµÙŠ Ø¨Ù‡Ø§ Ø¨Ø´Ø¯Ø©!"</p>
            </div>
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ø³</div><div><strong>Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠ ÙˆÙØ± Ø¹Ù„ÙŠÙ‘ Ø³Ø§Ø¹Ø§Øª Ù…Ù† Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŒ Ø§Ù„Ø´Ø±Ø­ ÙƒØ§Ù† Ø¬Ø¯Ø§Ù‹ Ù…Ø¨Ø³Ø· ÙˆÙ…ÙÙ‡ÙˆÙ…."</p>
            </div>
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ø£</div><div><strong>Ø£Ø­Ù…Ø¯ Ø§Ù„Ø®Ø§Ù„Ø¯ÙŠ</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø®Ø¯Ù…Ø© Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ Ø£ÙÙ‡Ù… Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙÙƒÙŠØ± ÙÙŠ Ø§Ù„Ø­Ù„ Ù…Ø´ Ø¨Ø³ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…!"</p>
            </div>
            <div class="testimonial-card">
                <div class="student-meta"><div class="avatar">Ù…</div><div><strong>Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ</strong><span class="stars">â­â­â­â­â­</span></div></div>
                <p class="comment-text">"Ø§Ù„Ø®Ø¯Ù…Ø© Ø±Ø§Ø¦Ø¹Ø© ÙˆØ³Ø±ÙŠØ¹Ø©ØŒ Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ ÙƒØ«ÙŠØ±Ø§Ù‹ ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©. Ø£ÙˆØµÙŠ Ø¨Ù‡Ø§ Ø¨Ø´Ø¯Ø©!"</p>
            </div>
        </div>
    </div>

    <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ğŸš€</button>
</div>

<div id="studentInfoPage" class="glass-card page-step">
    <div class="hero-section"><h1>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ ğŸ“</h1><p>Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ùƒ</p></div>
    <div class="form-container">
        <div class="form-group"><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input type="text" id="studentName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..."></div>
        <div class="form-group"><label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</label><input type="tel" id="studentPhone" placeholder="07XXXXXXXX" maxlength="10" pattern="07[7-9][0-9]{7}"></div>
        <button id="toMajorBtn" class="btn-action">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ®ØµØµ â¬…ï¸</button>
    </div>
</div>

<div id="majorPage" class="glass-card page-step">
    <div class="hero-section"><h1>Ø§Ø®ØªØ± ØªØ®ØµØµÙƒ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ ğŸ“š</h1><p>Ù„Ù†Ø®ØµØµ Ù„Ùƒ Ø®Ø¨ÙŠØ±Ø§Ù‹ ÙÙŠ Ù…Ø¬Ø§Ù„Ùƒ</p></div>
    <div class="grid-options">
        <div class="option-card major-box" data-major="ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª"><i>ğŸ’»</i><h3>IT</h3><p>Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø£Ù…Ù† Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ ÙˆØ´Ø¨ÙƒØ§Øª</p></div>
        <div class="option-card major-box" data-major="Ø§Ù„ØµÙŠØ¯Ù„Ø©"><i>ğŸ’Š</i><h3>Ø§Ù„ØµÙŠØ¯Ù„Ø©</h3><p>ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø­ÙŠÙˆÙŠØ© ÙˆØ¹Ù„Ù… Ø£Ø¯ÙˆÙŠØ©</p></div>
        <div class="option-card major-box" data-major="Ø§Ù„ØªÙ…Ø±ÙŠØ¶"><i>ğŸ©º</i><h3>Ø§Ù„ØªÙ…Ø±ÙŠØ¶</h3><p>Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ØªÙ…Ø±ÙŠØ¶ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø·Ø¨ÙŠØ©</p></div>
    </div>
</div>

<div id="servicePage" class="glass-card page-step">
    <div class="hero-section"><h1>Ù…Ø§ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©ØŸ ğŸ¤”</h1><p>Ø§Ø®ØªØ± Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ (ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø­ØªÙ‰ Ø«Ù„Ø§Ø«)</p></div>
    <div class="grid-options">
        <div class="option-card service-box" data-service="Ø´Ø±Ø­ ØµÙˆØªÙŠ" data-price="5"><i>ğŸ™ï¸</i><h3>Ø´Ø±Ø­ ØµÙˆØªÙŠ</h3><p>ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ ÙŠØ´Ø±Ø­ ÙƒÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„</p></div>
        <div class="option-card service-box" data-service="ØªÙ„Ø®ÙŠØµ Ø°ÙƒÙŠ" data-price="3"><i>ğŸ“</i><h3>ØªÙ„Ø®ÙŠØµ Ø°ÙƒÙŠ</h3><p>ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„ÙƒØ«ÙŠØ±Ø© Ù„Ù†Ù‚Ø§Ø· Ù…Ø±ÙƒØ²Ø©</p></div>
        <div class="option-card service-box" data-service="Ø­Ù„ Ø£Ø³Ø¦Ù„Ø©" data-price="4"><i>âœ…</i><h3>Ø­Ù„ Ø£Ø³Ø¦Ù„Ø©</h3><p>Ø­Ù„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ù…Ø¹ Ø´Ø±Ø­ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ù„</p></div>
    </div>
    <div class="form-container">
        <div class="form-group"><label>Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù€ PDF ğŸ“‚</label><input type="file" id="pdfFile" accept=".pdf"></div>
        <button id="toPaymentBtn" class="btn-action">Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„ØªØ³Ø¹ÙŠØ±Ø© ğŸ’°</button>
    </div>
</div>

<div id="paymentPage" class="glass-card page-step">
    <div class="hero-section"><h1>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ğŸ’³</h1><p id="summaryLabel"></p></div>
    <div class="form-container">
        <h2 id="finalPriceDisplay" style="text-align: center; margin-bottom: 25px; color: var(--accent-color); font-size: 2.5rem;"></h2>
        <div class="grid-options" style="grid-template-columns: 1fr 1fr;">
            <div class="option-card pay-box" data-method="Visa"><i>ğŸ’³</i><h3>ÙÙŠØ²Ø§ / Ù…Ø§Ø³ØªØ±</h3></div>
            <div class="option-card pay-box" data-method="CliQ"><i>ğŸ“±</i><h3>ÙƒÙ„ÙŠÙƒ</h3></div>
        </div>
        <div id="cliqDetails" class="payment-details">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±: <b>ESHRAHLY</b><br>Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù…: <b>079XXXXXXX</b></div>
        <div id="visaDetails" class="payment-details">Ø³ÙŠØªÙ… ØªØ²ÙˆÙŠØ¯Ùƒ Ø¨Ø±Ø§Ø¨Ø· Ø¯ÙØ¹ Ø¢Ù…Ù† Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.</div>
        <div id="proofArea" style="display:none; margin-top: 20px;">
            <div class="form-group"><label>Ø§Ø±ÙÙ‚ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (Screenshot) ğŸ“¸</label><input type="file" id="payScreenshot" accept="image/*"></div>
            <button id="finishBtn" class="btn-action" disabled>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ âœ…</button>
        </div>
    </div>
</div>

<div id="successPage" class="glass-card page-step" style="text-align: center;">
    <div style="font-size: 5rem; margin-bottom: 20px;">ğŸ‰</div>
    <h1>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!</h1>
    <p>Ù„Ù‚Ø¯ ÙˆØµÙ„ØªÙ†Ø§ Ù…Ù„ÙØ§ØªÙƒ ÙˆØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­. ğŸ</p>
    <button id="returnBtn" onclick="location.reload()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </button>
</div>

<script>
    // --- ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØµØ§Ø¹Ø¯ÙŠ ---
    function animateCounters() {
        const counters = document.querySelectorAll('.counter');
        counters.forEach(counter => {
            const target = +counter.getAttribute('data-target');
            let count = 0;
            const increment = target / 50;
            const updateCount = () => {
                if(count < target) {
                    count += increment;
                    counter.innerText = Math.ceil(count) + "+";
                    setTimeout(updateCount, 30);
                } else { counter.innerText = target + "+"; }
            };
            updateCount();
        });

        const floatCounters = document.querySelectorAll('.counter-float');
        floatCounters.forEach(counter => {
            const target = parseFloat(counter.getAttribute('data-target'));
            let count = 0;
            const updateCount = () => {
                if(count < target) {
                    count += 0.1;
                    counter.innerText = count.toFixed(1);
                    setTimeout(updateCount, 40);
                } else { counter.innerText = target + "/5"; }
            };
            updateCount();
        });
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', animateCounters);

    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwys5r6UrhPyulbUNuVaFb8isGNcP4AZi3b73YDj49R8sq41vrJmGeTD10NpNAX667bkw/exec"; 

    let userData = {
        name: "", phone: "", major: "", services: [], price: 0, pdfName: "", payMethod: ""
    };

    function showPage(pageId) {
        document.getElementById('loadingOverlay').style.display = 'flex';
        setTimeout(() => {
            document.querySelectorAll('.page-step').forEach(p => p.style.display = 'none');
            document.getElementById(pageId).style.display = 'block';
            document.getElementById('loadingOverlay').style.display = 'none';
            window.scrollTo(0,0);
        }, 800);
    }

    document.getElementById('startBtn').onclick = () => showPage('studentInfoPage');

    document.getElementById('toMajorBtn').onclick = function() {
        const name = document.getElementById('studentName').value;
        const phone = document.getElementById('studentPhone').value;
        const phoneRegex = /^07\d{8}$/;
        if(!name) { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"); return; }
        if(!phoneRegex.test(phone)) { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 07 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 10 Ø£Ø±Ù‚Ø§Ù…"); return; }
        userData.name = name; userData.phone = phone;
        showPage('majorPage');
    };

    document.querySelectorAll('.major-box').forEach(card => {
        card.onclick = function() { 
            document.querySelectorAll('.major-box').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            userData.major = this.dataset.major; 
            setTimeout(() => showPage('servicePage'), 500);
        }
    });

    document.querySelectorAll('.service-box').forEach(card => {
        card.onclick = function() {
            const service = this.dataset.service;
            const price = parseInt(this.dataset.price);
            const index = userData.services.indexOf(service);
            if (index > -1) {
                userData.services.splice(index, 1);
                userData.price -= price;
                this.classList.remove('active');
            } else {
                if (userData.services.length < 3) {
                    userData.services.push(service);
                    userData.price += price;
                    this.classList.add('active');
                } else { alert("ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø­ØªÙ‰ Ø«Ù„Ø§Ø« Ø®Ø¯Ù…Ø§Øª ÙÙ‚Ø·!"); }
            }
        }
    });

    document.getElementById('toPaymentBtn').onclick = function() {
        const file = document.getElementById('pdfFile').files[0];
        if(userData.services.length === 0 || !file) { alert("Ù„Ø·ÙØ§Ù‹ Ø§Ø®ØªØ± Ø®Ø¯Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ø£Ùˆ Ø£ÙƒØ«Ø± ÙˆØ§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù€ PDF"); return; }
        userData.pdfName = file.name;
        document.getElementById('summaryLabel').innerText = `ÙŠØ§ ${userData.name}ØŒ Ø·Ù„Ø¨Ùƒ: ØªØ®ØµØµ ${userData.major} | Ø®Ø¯Ù…Ø§Øª ${userData.services.join(' Ùˆ ')}`;
        document.getElementById('finalPriceDisplay').innerText = `${userData.price} Ø¯ÙŠÙ†Ø§Ø±`;
        showPage('paymentPage');
    };

    document.querySelectorAll('.pay-box').forEach(card => {
        card.onclick = function() {
            document.querySelectorAll('.pay-box').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            userData.payMethod = this.dataset.method;
            document.getElementById('cliqDetails').style.display = (userData.payMethod === 'CliQ') ? 'block' : 'none';
            document.getElementById('visaDetails').style.display = (userData.payMethod === 'Visa') ? 'block' : 'none';
            document.getElementById('proofArea').style.display = 'block';
            document.getElementById('finishBtn').disabled = false;
        }
    });

    const fileToBase64 = file => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });

    document.getElementById('finishBtn').onclick = async function() {
        const pdfFile = document.getElementById('pdfFile').files[0];
        const payFile = document.getElementById('payScreenshot').files[0];
        if(!pdfFile || !payFile) { alert("ÙŠØ§ ØµØ¯ÙŠÙ‚ÙŠØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø§Ù„Ù€ PDF ÙˆØµÙˆØ±Ø© Ø§Ù„Ø¯ÙØ¹ Ø£ÙˆÙ„Ø§Ù‹!"); return; }

        document.getElementById('loadingOverlay').style.display = 'flex';
        document.getElementById('loadingOverlay').querySelector('p').innerText = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª... ğŸ”';

        try {
            const { createWorker } = Tesseract;
            const worker = await createWorker();
            await worker.loadLanguage('ara+eng');
            await worker.initialize('ara+eng');
            const { data: { text } } = await worker.recognize(payFile);
            await worker.terminate();

            const paymentKeywords = ['Ø¯ÙØ¹', 'ØªØ­ÙˆÙŠÙ„', 'ÙƒÙ„ÙŠÙƒ', 'CliQ', 'ÙÙŠØ²Ø§', 'Visa', 'Ù…Ø§Ø³ØªØ±', 'Master', 'Ø¥ÙŠØµØ§Ù„', 'receipt', 'payment', 'transfer'];
            const isPaymentProof = paymentKeywords.some(keyword => text.toLowerCase().includes(keyword.toLowerCase()));

            if (!isPaymentProof) {
                alert("Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø© Ù„Ø§ ØªØ¨Ø¯Ùˆ ÙƒØ¥Ø«Ø¨Ø§Øª Ø¯ÙØ¹ ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¯ÙØ¹ Ø£ÙˆÙ„Ø§Ù‹ ÙˆØ±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ.");
                document.getElementById('loadingOverlay').style.display = 'none';
                return;
            }

            document.getElementById('loadingOverlay').querySelector('p').innerText = 'Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨... ğŸ“¤';

            const pdfBase64 = await fileToBase64(pdfFile);
            const imgBase64 = await fileToBase64(payFile);

            const payload = {
                name: userData.name, phone: userData.phone, major: userData.major,
                service: userData.services.join(', '), price: userData.price, payMethod: userData.payMethod,
                pdfName: pdfFile.name, pdfData: pdfBase64, imgData: imgBase64
            };

            await fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });

            // ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ù† Ù‡Ù†Ø§
            
            showPage('successPage');
        } catch (error) {
            console.error(error);
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
        } finally {
            document.getElementById('loadingOverlay').style.display = 'none';
        }
    };
</script>

</body>

</html>
